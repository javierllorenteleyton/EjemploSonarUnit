<?xml version="1.0" encoding="UTF-8" ?>
<!--Ant buildfile generated by Oracle JDeveloper-->
<!--Generated Mar 7, 2017 7:04:40 PM-->
<project name="Cobertura" default="cobertura">
  <import file="./buildTest.xml"/>
  <target name="cobertura.init">
    <mkdir dir="${cobertura.instrumented.dir}"/>
    <mkdir dir="${cobertura.dir}"/>
    <mkdir dir="${cobertura.junit.xml.dir}"/>
    <mkdir dir="${cobertura.junit.html.dir}"/>
    <mkdir dir="${cobertura.xml.dir}"/>
    <mkdir dir="${cobertura.summaryxml.dir}"/>
    <mkdir dir="${cobertura.html.dir}"/>
  </target>
  <target name="cobertura.clean"
          description="Remove all files created by the build/test process.">
    <delete includeemptydirs="true" quiet="true">
      <fileset dir="${cobertura.instrumented.dir}" includes="**/*"/>
      <fileset dir="${cobertura.dir}" includes="**/*"/>
      <fileset dir="${cobertura.junit.xml.dir}" includes="**/*"/>
      <fileset dir="${cobertura.junit.html.dir}" includes="**/*"/>
      <fileset dir="${cobertura.xml.dir}" includes="**/*"/>
      <fileset dir="${cobertura.summaryxml.dir}" includes="**/*"/>
      <fileset dir="${cobertura.html.dir}" includes="**/*"/>
    </delete>
  </target>
  <target name="cobertura" depends="cobertura.clean,cobertura.init,test.init,test.compile"
          description="Compile, instrument ourself, run the tests and generate JUnit and coverage reports.">
    <cobertura-instrument todir="${cobertura.instrumented.dir}">
      <ignore regex="org.slf4j.*"/>
      <fileset dir="../Model/classes">
        <include name="**/*.class"/>
      </fileset>
    </cobertura-instrument>
    <junit printsummary="true" fork="yes" failureproperty="test.failed"
           forkmode="once">
      <jvmarg value="${xms}"/>
      <jvmarg value="${xmx}"/>
      <!--
				Specify the name of the coverage data file to use.
			-->
      <sysproperty key="net.sourceforge.cobertura.datafile"
                   file="${cobertura.dir}/coverage.ser"/>
      <!--
				Note the classpath order: instrumented classes are before the
				original (uninstrumented) classes.  This is important.
			-->
      <classpath location="${cobertura.instrumented.dir}"/>
      <classpath location="./classes"/>
      <!--
				The instrumented classes reference classes used by the
				Cobertura runtime, so Cobertura and its dependencies
				must be on your classpath.
			-->
      <classpath refid="cobertura.classpath"/>
      <formatter type="xml"/>
      <test name="com.avanttic.ejemplo.test.AllTests" todir="${reports.xml.dir}"
            if="testcase"/>
      <batchtest todir="${cobertura.xml.dir}" unless="testcase">
        <fileset dir="./src">
          <include name="**/*Test.java"/>
        </fileset>
      </batchtest>
    </junit>
    <junitreport todir="${cobertura.xml.dir}">
      <fileset dir="${cobertura.xml.dir}">
        <include name="TEST-*.xml"/>
      </fileset>
      <report format="frames" todir="${cobertura.html.dir}"/>
    </junitreport>
    <!--
			Generate an XML file containing the coverage data using
			the "srcdir" attribute.
		-->
    <cobertura-report srcdir="../Model/src" destdir="${cobertura.xml.dir}"
                      format="xml"
                      datafile="${cobertura.dir}/coverage.ser"/>
    <!--
			Generate an summary XML file containing the coverage data using
			the "srcdir" attribute.
		-->
    <cobertura-report srcdir="../Model/src" destdir="${cobertura.summaryxml.dir}"
                      datafile="${cobertura.dir}/coverage.ser"
                      format="summaryXml"/>
    <!--
			Generate a series of HTML files containing the coverage
			data in a user-readable form using nested source filesets.
		-->
    <cobertura-report destdir="${cobertura.html.dir}"
                      datafile="${cobertura.dir}/coverage.ser">
      <fileset dir="../Model/src">
        <include name="**/*.java"/>
      </fileset>
    </cobertura-report>
    <!--    <cobertura-check branchrate="34" totallinerate="100"/> -->
  </target>
</project>
